{"version":3,"sources":["../../src/hooks/resolveUrl.ts"],"sourcesContent":["import type { CollectionBeforeChangeHook } from 'payload'\n\nimport type { PluginContext } from '../utils/createPluginContext.js'\n\nimport { generateLocalizedUrl } from '../utils/generateUrl.js'\n\nexport const resolveUrl =\n  (context: PluginContext): CollectionBeforeChangeHook =>\n  ({ data, req }) => {\n    const { urlFieldConfig } = context.fieldConfigs\n\n    // Resolve the final URL by appending locale if needed\n    const url = generateLocalizedUrl({\n      context,\n      data,\n      req,\n    })\n\n    return {\n      ...data,\n      [urlFieldConfig.fieldName]: url,\n    }\n  }\n"],"names":["generateLocalizedUrl","resolveUrl","context","data","req","urlFieldConfig","fieldConfigs","url","fieldName"],"mappings":"AAIA,SAASA,oBAAoB,QAAQ,0BAAyB;AAE9D,OAAO,MAAMC,aACX,CAACC,UACD,CAAC,EAAEC,IAAI,EAAEC,GAAG,EAAE;QACZ,MAAM,EAAEC,cAAc,EAAE,GAAGH,QAAQI,YAAY;QAE/C,sDAAsD;QACtD,MAAMC,MAAMP,qBAAqB;YAC/BE;YACAC;YACAC;QACF;QAEA,OAAO;YACL,GAAGD,IAAI;YACP,CAACE,eAAeG,SAAS,CAAC,EAAED;QAC9B;IACF,EAAC"}