{"version":3,"sources":["../../src/components/PermalinkFieldClient.tsx"],"sourcesContent":["'use client'\n\nimport type { UIFieldClientProps } from 'payload'\n\nimport { useDocumentInfo, useFormFields } from '@payloadcms/ui'\nimport { useMemo } from 'react'\n\ntype Props = {\n  custom: {\n    serverURL: string\n    sourceField: string\n  }\n} & UIFieldClientProps\n\nexport const PermalinkFieldClient: React.FC<Props> = ({ custom }) => {\n  const { serverURL } = custom\n  const { id } = useDocumentInfo()\n\n  // Listen to the field value\n  const targetFieldValue = useFormFields(([fields]) => {\n    return fields[custom.sourceField]?.value as string\n  })\n\n  // Compute permalink only when necessary\n  const processedValue = useMemo(() => {\n    if (!targetFieldValue) {\n      return ''\n    }\n    return `${serverURL}${targetFieldValue}`\n  }, [serverURL, targetFieldValue])\n\n  if (!id || !processedValue) {\n    return null\n  }\n\n  return (\n    <div className=\"field-type permalinksField\">\n      <strong>Permalink:</strong>{' '}\n      <a href={processedValue} rel=\"noopener noreferrer\" target=\"_blank\">\n        {processedValue}\n      </a>\n    </div>\n  )\n}\n"],"names":["useDocumentInfo","useFormFields","useMemo","PermalinkFieldClient","custom","serverURL","id","targetFieldValue","fields","sourceField","value","processedValue","div","className","strong","a","href","rel","target"],"mappings":"AAAA;;AAIA,SAASA,eAAe,EAAEC,aAAa,QAAQ,iBAAgB;AAC/D,SAASC,OAAO,QAAQ,QAAO;AAS/B,OAAO,MAAMC,uBAAwC,CAAC,EAAEC,MAAM,EAAE;IAC9D,MAAM,EAAEC,SAAS,EAAE,GAAGD;IACtB,MAAM,EAAEE,EAAE,EAAE,GAAGN;IAEf,4BAA4B;IAC5B,MAAMO,mBAAmBN,cAAc,CAAC,CAACO,OAAO;QAC9C,OAAOA,MAAM,CAACJ,OAAOK,WAAW,CAAC,EAAEC;IACrC;IAEA,wCAAwC;IACxC,MAAMC,iBAAiBT,QAAQ;QAC7B,IAAI,CAACK,kBAAkB;YACrB,OAAO;QACT;QACA,OAAO,GAAGF,YAAYE,kBAAkB;IAC1C,GAAG;QAACF;QAAWE;KAAiB;IAEhC,IAAI,CAACD,MAAM,CAACK,gBAAgB;QAC1B,OAAO;IACT;IAEA,qBACE,MAACC;QAAIC,WAAU;;0BACb,KAACC;0BAAO;;YAAoB;0BAC5B,KAACC;gBAAEC,MAAML;gBAAgBM,KAAI;gBAAsBC,QAAO;0BACvDP;;;;AAIT,EAAC"}