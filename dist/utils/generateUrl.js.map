{"version":3,"sources":["../../src/utils/generateUrl.ts"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\nimport type { PluginContext } from './createPluginContext.js'\n\nexport const generateUrl = (context: PluginContext, data: Partial<any> | undefined) => {\n  const { urlFieldConfig } = context.fieldConfigs\n  // Generate URL if `generateUrl` function is provided\n  const generatedUrl =\n    typeof urlFieldConfig.generateUrl === 'function' ? urlFieldConfig.generateUrl(data) : ''\n\n  // Handle nested docs logic\n  if (context.nestedDocsEnabled && data) {\n    const breadcrumbs = Array.isArray(data.breadcrumbs) ? data.breadcrumbs : []\n    const nestedUrl = breadcrumbs.reverse()[0]?.url || ''\n    return nestedUrl || generatedUrl\n  }\n\n  return generatedUrl\n}\n\nexport const generateLocalizedUrl = ({\n  context,\n  data,\n  req,\n}: {\n  context: PluginContext\n  data: Partial<any> | undefined\n  req: PayloadRequest\n}): string => {\n  const { locale, payload } = req\n  const { defaultLocale = context.fallbackLocale } = payload.config.localization || {}\n\n  const url = generateUrl(context, data)\n  switch (context.appendLocaleToUrl) {\n    case 'all':\n      return `/${locale}${url}`\n    case 'exclude-default':\n      return locale === defaultLocale ? url : `/${locale}${url}`\n    default:\n      return url\n  }\n}\n"],"names":["generateUrl","context","data","urlFieldConfig","fieldConfigs","generatedUrl","nestedDocsEnabled","breadcrumbs","Array","isArray","nestedUrl","reverse","url","generateLocalizedUrl","req","locale","payload","defaultLocale","fallbackLocale","config","localization","appendLocaleToUrl"],"mappings":"AAIA,OAAO,MAAMA,cAAc,CAACC,SAAwBC;IAClD,MAAM,EAAEC,cAAc,EAAE,GAAGF,QAAQG,YAAY;IAC/C,qDAAqD;IACrD,MAAMC,eACJ,OAAOF,eAAeH,WAAW,KAAK,aAAaG,eAAeH,WAAW,CAACE,QAAQ;IAExF,2BAA2B;IAC3B,IAAID,QAAQK,iBAAiB,IAAIJ,MAAM;QACrC,MAAMK,cAAcC,MAAMC,OAAO,CAACP,KAAKK,WAAW,IAAIL,KAAKK,WAAW,GAAG,EAAE;QAC3E,MAAMG,YAAYH,YAAYI,OAAO,EAAE,CAAC,EAAE,EAAEC,OAAO;QACnD,OAAOF,aAAaL;IACtB;IAEA,OAAOA;AACT,EAAC;AAED,OAAO,MAAMQ,uBAAuB,CAAC,EACnCZ,OAAO,EACPC,IAAI,EACJY,GAAG,EAKJ;IACC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE,GAAGF;IAC5B,MAAM,EAAEG,gBAAgBhB,QAAQiB,cAAc,EAAE,GAAGF,QAAQG,MAAM,CAACC,YAAY,IAAI,CAAC;IAEnF,MAAMR,MAAMZ,YAAYC,SAASC;IACjC,OAAQD,QAAQoB,iBAAiB;QAC/B,KAAK;YACH,OAAO,CAAC,CAAC,EAAEN,SAASH,KAAK;QAC3B,KAAK;YACH,OAAOG,WAAWE,gBAAgBL,MAAM,CAAC,CAAC,EAAEG,SAASH,KAAK;QAC5D;YACE,OAAOA;IACX;AACF,EAAC"}